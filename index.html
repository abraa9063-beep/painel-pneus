<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Transportes Canarinho - Controle de Pneus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --accent: #38bdf8;
      --text: #e2e8f0;
      --muted: #94a3b8;
      --danger: #f43f5e;
      --warn: #f97316;
      --success: #10b981;
      --radius: 12px;
    }
    * {
      box-sizing: border-box;
      font-family: "Segoe UI", system-ui, sans-serif;
      margin: 0;
      padding: 0;
    }
    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    header {
      padding: 16px 24px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.12);
      background: rgba(2, 6, 23, 0.78);
    }
    header h1 {
      margin: 0;
      font-size: 1.3rem;
    }
    main {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .tab-btn {
      background: rgba(15, 23, 42, 0.3);
      border: 1px solid rgba(148, 163, 184, 0.2);
      color: var(--text);
      padding: 8px 16px;
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.3s;
    }
    .tab-btn:hover {
      background: rgba(15, 23, 42, 0.6);
    }
    .tab-btn.active {
      background: var(--accent);
      color: #020617;
    }
    .hidden {
      display: none !important;
    }
    .toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .input, select, button {
      padding: 8px 12px;
      border-radius: var(--radius);
      border: 1px solid rgba(148, 163, 184, 0.3);
      background: rgba(15, 23, 42, 0.6);
      color: var(--text);
    }
    button {
      background: var(--accent);
      color: #020617;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }
    .card {
      background: rgba(2, 6, 23, 0.55);
      border: 1px solid rgba(148, 163, 184, 0.1);
      border-radius: var(--radius);
      overflow: hidden;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid rgba(148, 163, 184, 0.1);
    }
    th {
      background: rgba(15, 23, 42, 0.4);
      color: var(--muted);
      font-weight: 600;
    }
    .badge {
      background: rgba(15, 23, 42, 0.6);
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 0.8rem;
      display: inline-block;
    }
    .sulco-critico {
      background: rgba(244, 63, 94, 0.2);
      color: #ffe4e6;
    }
    .sulco-alerta {
      background: rgba(249, 115, 22, 0.2);
      color: #ffedd5;
    }
    .sulco-ok {
      background: rgba(16, 185, 129, 0.2);
      color: #d1fae5;
    }
    .qty-low {
      background: rgba(244, 63, 94, 0.2);
      color: #ffe4e6;
    }
    .actions {
      display: flex;
      gap: 5px;
    }
    .btn-xs {
      padding: 4px 8px;
      font-size: 0.8rem;
      background: rgba(15, 23, 42, 0.4);
      color: var(--text);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-xs:hover {
      background: rgba(15, 23, 42, 0.6);
    }
    .btn-success {
      background: rgba(16, 185, 129, 0.2);
      color: #d1fae5;
    }
    .modal-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(2, 6, 23, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal {
      background: var(--bg);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: var(--radius);
      padding: 20px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }
    .modal h2 {
      margin-top: 0;
      margin-bottom: 20px;
    }
    .modal-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 15px;
    }
    .field-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 10px;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin-bottom: 20px;
    }
    .stat-card {
      background: rgba(15, 23, 42, 0.4);
      padding: 15px;
      border-radius: var(--radius);
      text-align: center;
    }
    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--accent);
    }
    .stat-label {
      font-size: 0.8rem;
      color: var(--muted);
    }
    
    /* Estilos para os bot√µes de container */
    .container-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    .container-btn {
      flex: 1;
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(148, 163, 184, 0.2);
      color: var(--text);
      padding: 12px;
      border-radius: var(--radius);
      cursor: pointer;
      text-align: center;
      transition: all 0.3s;
    }
    .container-btn:hover {
      background: rgba(56, 189, 248, 0.2);
    }
    .container-btn.active {
      background: var(--accent);
      color: #020617;
      border-color: var(--accent);
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      color: var(--muted);
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>üöö Transportes Canarinho - Controle de Pneus</h1>
  </header>
  
  <main>
    <div class="tabs">
      <button class="tab-btn active" data-tab="container">Container</button>
      <button class="tab-btn" data-tab="fogo">Controle por Fogo</button>
      <button class="tab-btn" data-tab="recapagem">Recapagem</button>
      <button class="tab-btn" data-tab="descarte">Descarte</button>
      <button class="tab-btn" data-tab="venda">Vendas</button>
      <button class="tab-btn" data-tab="saidas">Sa√≠das</button>
      <button class="tab-btn" data-tab="alertas">Alertas</button>
    </div>

    <!-- CONTAINER -->
    <div id="tab-container">
      <div class="stats-grid" id="statsContainer">
        <div class="stat-card">
          <div class="stat-value">0</div>
          <div class="stat-label">Total em Estoque</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">0</div>
          <div class="stat-label">Pneus Novos</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">0</div>
          <div class="stat-label">Baixo Estoque</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">0</div>
          <div class="stat-label">Sulco Cr√≠tico</div>
        </div>
      </div>

      <div class="toolbar">
        <input type="text" id="searchInput" class="input" placeholder="Buscar por ID, medida, DOT..." style="flex:1;">
        <select id="statusFilter" class="input">
          <option value="">Todos status</option>
          <option value="Novo">Novo</option>
          <option value="Usado">Usado</option>
          <option value="Reformado">Reformado</option>
        </select>
        <button id="addItemBtn">+ Novo Pneu</button>
      </div>
      
      <!-- Bot√µes de Container -->
      <div class="container-buttons">
        <button class="container-btn active" data-container="container1">Container 1</button>
        <button class="container-btn" data-container="container2">Container 2</button>
        <button class="container-btn" data-container="container3">Container 3</button>
      </div>

      <!-- Container 1 -->
      <div id="container1-content" class="container-content">
        <div class="card">
          <div style="padding: 15px;">
            <h3>Container 1 - Estoque de Pneus</h3>
            <div id="itemsCount" style="color: var(--muted); font-size: 0.9rem; margin-bottom: 10px;">0 pneu(s) encontrado(s)</div>
          </div>
          <div style="overflow-x: auto;">
            <table>
              <thead>
                <tr>
                  <th>Imagem</th>
                  <th>ID</th>
                  <th>Medida</th>
                  <th>Marca/Modelo</th>
                  <th>DOT</th>
                  <th>Sulco</th>
                  <th>Status</th>
                  <th>Qtd</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="tableBody">
                <tr>
                  <td colspan="9" style="text-align: center; padding: 20px; color: var(--muted);">
                    Nenhum pneu cadastrado. Clique em "+ Novo Pneu" para adicionar.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Container 2 -->
      <div id="container2-content" class="container-content hidden">
        <div class="card">
          <div style="padding: 15px;">
            <h3>Container 2 - Estoque de Pneus</h3>
            <div id="itemsCount2" style="color: var(--muted); font-size: 0.9rem; margin-bottom: 10px;">0 pneu(s) encontrado(s)</div>
          </div>
          <div style="overflow-x: auto;">
            <table>
              <thead>
                <tr>
                  <th>Imagem</th>
                  <th>ID</th>
                  <th>Medida</th>
                  <th>Marca/Modelo</th>
                  <th>DOT</th>
                  <th>Sulco</th>
                  <th>Status</th>
                  <th>Qtd</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="tableBody2">
                <tr>
                  <td colspan="9" style="text-align: center; padding: 20px; color: var(--muted);">
                    Nenhum pneu cadastrado no Container 2.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Container 3 -->
      <div id="container3-content" class="container-content hidden">
        <div class="card">
          <div style="padding: 15px;">
            <h3>Container 3 - Estoque de Pneus</h3>
            <div id="itemsCount3" style="color: var(--muted); font-size: 0.9rem; margin-bottom: 10px;">0 pneu(s) encontrado(s)</div>
          </div>
          <div style="overflow-x: auto;">
            <table>
              <thead>
                <tr>
                  <th>Imagem</th>
                  <th>ID</th>
                  <th>Medida</th>
                  <th>Marca/Modelo</th>
                  <th>DOT</th>
                  <th>Sulco</th>
                  <th>Status</th>
                  <th>Qtd</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="tableBody3">
                <tr>
                  <td colspan="9" style="text-align: center; padding: 20px; color: var(--muted);">
                    Nenhum pneu cadastrado no Container 3.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Editar Pneu -->
    <div class="modal-backdrop" id="editModal">
      <div class="modal">
        <h2 id="editTitle">Novo Pneu</h2>
        
        <div style="display: flex; flex-direction: column; gap: 15px;">
          <div class="field-row">
            <div>
              <label for="editId">C√≥digo/Fogo *</label>
              <input type="text" id="editId" class="input" placeholder="C√≥digo √∫nico do pneu">
            </div>
            <div>
              <label for="editMedida">Medida *</label>
              <input type="text" id="editMedida" class="input" placeholder="295/80 R22.5">
            </div>
          </div>

          <div class="field-row">
            <div>
              <label for="editMarca">Marca *</label>
              <input type="text" id="editMarca" class="input" placeholder="Michelin">
            </div>
            <div>
              <label for="editModelo">Modelo *</label>
              <input type="text" id="editModelo" class="input" placeholder="X Line Energy">
            </div>
          </div>

          <div class="field-row">
            <div>
              <label for="editDot">DOT</label>
              <input type="text" id="editDot" class="input" placeholder="4321">
            </div>
            <div>
              <label for="editSulco">Sulco (mm)</label>
              <input type="number" id="editSulco" class="input" step="0.1" min="0" max="20" value="0">
            </div>
          </div>

          <div class="field-row">
            <div>
              <label for="editStatus">Status</label>
              <select id="editStatus" class="input">
                <option value="Novo">Novo</option>
                <option value="Usado">Usado</option>
                <option value="Reformado">Reformado</option>
              </select>
            </div>
            <div>
              <label for="editQty">Quantidade em Estoque *</label>
              <input type="number" id="editQty" class="input" min="0" value="0">
            </div>
          </div>

          <div class="field-row">
            <div>
              <label for="editContainer">Container</label>
              <select id="editContainer" class="input">
                <option value="container1">Container 1</option>
                <option value="container2">Container 2</option>
                <option value="container3">Container 3</option>
              </select>
            </div>
            <div>
              <label for="editPreco">Pre√ßo (R$)</label>
              <input type="number" id="editPreco" class="input" step="0.01" min="0" placeholder="0.00">
            </div>
          </div>

          <div>
            <label for="editObservacoes">Observa√ß√µes</label>
            <textarea id="editObservacoes" class="input" placeholder="Observa√ß√µes adicionais..." style="width: 100%; height: 60px;"></textarea>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn-xs" onclick="closeEditModal()">Cancelar</button>
          <button onclick="saveItem()">Salvar Pneu</button>
        </div>
      </div>
    </div>

  </main>

  <script>
    // Dados iniciais
    let items = JSON.parse(localStorage.getItem('tc_pneus')) || [
      { 
        id: "PNEU-001", 
        medida: "295/80 R22.5",
        marca: "Michelin",
        modelo: "X Line Energy",
        dot: "4321",
        sulco: 8.5,
        status: "Novo",
        qty: 8,
        preco: 1250.00,
        observacoes: "",
        container: "container1"
      },
      { 
        id: "PNEU-002", 
        medida: "11R22.5",
        marca: "Bridgestone", 
        modelo: "R194",
        dot: "1234",
        sulco: 4.2,
        status: "Usado",
        qty: 3,
        preco: 850.00,
        observacoes: "Pneu reformado",
        container: "container1"
      }
    ];

    let currentItem = null;
    let currentContainer = "container1";

    // Inicializa√ß√£o
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM carregado, inicializando...');
      init();
    });

    function init() {
      console.log('Inicializando aplica√ß√£o...');
      setupEventListeners();
      renderTable();
      renderStats();
    }

    function setupEventListeners() {
      console.log('Configurando event listeners...');
      
      // Tabs
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          console.log('Clicou na tab:', this.dataset.tab);
          document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
          document.querySelectorAll('[id^="tab-"]').forEach(tab => tab.classList.add('hidden'));
          this.classList.add('active');
          document.getElementById('tab-' + this.dataset.tab).classList.remove('hidden');
        });
      });

      // Bot√µes de Container
      document.querySelectorAll('.container-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          console.log('Clicou no container:', this.dataset.container);
          document.querySelectorAll('.container-btn').forEach(b => b.classList.remove('active'));
          document.querySelectorAll('.container-content').forEach(content => content.classList.add('hidden'));
          this.classList.add('active');
          document.getElementById(this.dataset.container + '-content').classList.remove('hidden');
          currentContainer = this.dataset.container;
          renderTable();
        });
      });

      // Filtros
      document.getElementById('searchInput').addEventListener('input', renderTable);
      document.getElementById('statusFilter').addEventListener('change', renderTable);

      // Bot√£o novo item
      document.getElementById('addItemBtn').addEventListener('click', function() {
        console.log('Clicou em novo pneu');
        openEditModal();
      });
      
      console.log('Event listeners configurados');
    }

    function renderTable() {
      console.log('Renderizando tabela...');
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const statusTerm = document.getElementById('statusFilter').value;

      const filtered = items.filter(item => {
        const matchSearch = item.id.toLowerCase().includes(searchTerm) ||
                          item.medida.toLowerCase().includes(searchTerm) ||
                          (item.dot && item.dot.toLowerCase().includes(searchTerm)) ||
                          item.marca.toLowerCase().includes(searchTerm) ||
                          item.modelo.toLowerCase().includes(searchTerm);
        const matchStatus = !statusTerm || item.status === statusTerm;
        const matchContainer = item.container === currentContainer;
        return matchSearch && matchStatus && matchContainer;
      });

      let tableBodyElement, countElement;
      
      if (currentContainer === 'container1') {
        tableBodyElement = document.getElementById('tableBody');
        countElement = document.getElementById('itemsCount');
      } else if (currentContainer === 'container2') {
        tableBodyElement = document.getElementById('tableBody2');
        countElement = document.getElementById('itemsCount2');
      } else if (currentContainer === 'container3') {
        tableBodyElement = document.getElementById('tableBody3');
        countElement = document.getElementById('itemsCount3');
      }

      if (filtered.length === 0) {
        tableBodyElement.innerHTML = `
          <tr>
            <td colspan="9" style="text-align: center; padding: 20px; color: var(--muted);">
              Nenhum pneu encontrado.
            </td>
          </tr>
        `;
      } else {
        tableBodyElement.innerHTML = filtered.map(item => {
          const sulcoClass = item.sulco < 3.0 ? "sulco-critico" : 
                            item.sulco < 5.0 ? "sulco-alerta" : "sulco-ok";
          const needsReorder = item.qty <= 5;
          
          // Imagem placeholder
          const imagemSrc = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiByeD0iNiIgZmlsbD0icmdiYSgxNSwgMjMsIDQyLCAwLjYpIi8+CjxwYXRoIGQ9Ik0zOCAyNkMzOCAyOC4yMDkxIDM2LjIwOTEgMzAgMzQgMzBDMzEuNzkwOSAzMCAzMCAyOC4yMDkxIDMwIDI2QzMwIDIzLjc5MDkgMzEuNzkwOSAyMiAzNCAyMkMzNi4yMDkxIDIyIDM4IDIzLjc5MDkgMzggMjZaIiBmaWxsPSJyZ2JhKDE0OCwgMTYzLCAxODQsIDAuNCkiLz4KPHBhdGggZD0iTTQyIDM4SDE4QzE2Ljg5NTQgMzggMTYgMzcuMTA0NiAxNiAzNlYyNEMxNiAyMi44OTU0IDE2Ljg5NTQgMjIgMTggMjJINDJDNDMuMTA0NiAyMiA0NCAyMi44OTU0IDQ0IDI0VjM2QzQ0IDM3LjEwNDYgNDMuMTA0NiAzOCA0MiAzOFpNMTggMjRWMzZINDJWMjRIMThaIiBmaWxsPSJyZ2JhKDE0OCwgMTYzLCAxODQsIDAuNCkiLz4KPC9zdmc+';
          
          return `
            <tr>
              <td><img src="${imagemSrc}" class="pneu-image" alt="${item.id}"></td>
              <td><strong>${item.id}</strong></td>
              <td>${item.medida}</td>
              <td>${item.marca}<br><small style="color: var(--muted);">${item.modelo}</small></td>
              <td>${item.dot || '-'}</td>
              <td><span class="badge ${sulcoClass}">${item.sulco}mm</span></td>
              <td><span class="badge">${item.status}</span></td>
              <td>
                <span class="badge ${needsReorder ? 'qty-low' : ''}">${item.qty}</span>
                ${needsReorder ? '<br><small style="color: var(--danger);">Estoque baixo!</small>' : ''}
              </td>
              <td>
                <div class="actions">
                  <button class="btn-xs" onclick="openEditModal('${item.id}')">Editar</button>
                  <button class="btn-xs" style="background: rgba(244, 63, 94, 0.2); color: #ffe4e6;" onclick="deleteItem('${item.id}')">Excluir</button>
                </div>
              </td>
            </tr>
          `;
        }).join('');
      }

      countElement.textContent = `${filtered.length} pneu(s) encontrado(s)`;
      console.log('Tabela renderizada com', filtered.length, 'itens');
    }

    function renderStats() {
      const totalPneus = items.reduce((sum, item) => sum + item.qty, 0);
      const pneusNovos = items.filter(item => item.status === "Novo").reduce((sum, item) => sum + item.qty, 0);
      const pneusBaixoEstoque = items.filter(item => item.qty <= 5).reduce((sum, item) => sum + item.qty, 0);
      const pneusSulcoCritico = items.filter(item => item.sulco < 3.0).reduce((sum, item) => sum + item.qty, 0);

      document.getElementById('statsContainer').innerHTML = `
        <div class="stat-card">
          <div class="stat-value">${totalPneus}</div>
          <div class="stat-label">Total em Estoque</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">${pneusNovos}</div>
          <div class="stat-label">Pneus Novos</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">${pneusBaixoEstoque}</div>
          <div class="stat-label">Baixo Estoque</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">${pneusSulcoCritico}</div>
          <div class="stat-label">Sulco Cr√≠tico</div>
        </div>
      `;
    }

    function openEditModal(itemId = null) {
      console.log('Abrindo modal para:', itemId);
      currentItem = itemId ? items.find(item => item.id === itemId) : null;
      
      if (currentItem) {
        document.getElementById('editTitle').textContent = 'Editar Pneu';
        document.getElementById('editId').value = currentItem.id;
        document.getElementById('editMedida').value = currentItem.medida;
        document.getElementById('editMarca').value = currentItem.marca;
        document.getElementById('editModelo').value = currentItem.modelo;
        document.getElementById('editDot').value = currentItem.dot || '';
        document.getElementById('editSulco').value = currentItem.sulco;
        document.getElementById('editStatus').value = currentItem.status;
        document.getElementById('editQty').value = currentItem.qty;
        document.getElementById('editContainer').value = currentItem.container;
        document.getElementById('editPreco').value = currentItem.preco || '';
        document.getElementById('editObservacoes').value = currentItem.observacoes || '';
      } else {
        document.getElementById('editTitle').textContent = 'Novo Pneu';
        document.getElementById('editId').value = '';
        document.getElementById('editMedida').value = '';
        document.getElementById('editMarca').value = '';
        document.getElementById('editModelo').value = '';
        document.getElementById('editDot').value = '';
        document.getElementById('editSulco').value = '';
        document.getElementById('editStatus').value = 'Novo';
        document.getElementById('editQty').value = '';
        document.getElementById('editContainer').value = currentContainer;
        document.getElementById('editPreco').value = '';
        document.getElementById('editObservacoes').value = '';
      }

      document.getElementById('editModal').style.display = 'flex';
    }

    function closeEditModal() {
      document.getElementById('editModal').style.display = 'none';
      currentItem = null;
    }

    function saveItem() {
      const id = document.getElementById('editId').value.trim();
      const medida = document.getElementById('editMedida').value.trim();
      const marca = document.getElementById('editMarca').value.trim();
      const modelo = document.getElementById('editModelo').value.trim();
      const qty = parseInt(document.getElementById('editQty').value) || 0;
      const container = document.getElementById('editContainer').value;

      if (!id || !medida || !marca || !modelo) {
        alert('C√≥digo, Medida, Marca e Modelo s√£o obrigat√≥rios!');
        return;
      }

      const itemData = {
        id: id,
        medida: medida,
        marca: marca,
        modelo: modelo,
        dot: document.getElementById('editDot').value.trim(),
        sulco: parseFloat(document.getElementById('editSulco').value) || 0,
        status: document.getElementById('editStatus').value,
        qty: qty,
        container: container,
        preco: parseFloat(document.getElementById('editPreco').value) || 0,
        observacoes: document.getElementById('editObservacoes').value.trim()
      };

      if (currentItem) {
        // Editar
        Object.assign(currentItem, itemData);
      } else {
        // Novo item - verificar se ID j√° existe
        if (items.some(item => item.id === id)) {
          alert('J√° existe um pneu com este ID!');
          return;
        }
        items.push(itemData);
      }

      saveData();
      renderTable();
      renderStats();
      closeEditModal();

      alert('Pneu salvo com sucesso!');
    }

    function deleteItem(itemId) {
      if (!confirm('Tem certeza que deseja excluir este pneu?')) return;
      
      items = items.filter(item => item.id !== itemId);
      saveData();
      renderTable();
      renderStats();
    }

    function saveData() {
      localStorage.setItem('tc_pneus', JSON.stringify(items));
    }

    // Fun√ß√µes globais para acesso pelo HTML
    window.openEditModal = openEditModal;
    window.closeEditModal = closeEditModal;
    window.saveItem = saveItem;
    window.deleteItem = deleteItem;
  </script>
</body>
</html>
